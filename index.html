<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÌïúÎ¨∏ ÌïôÏäµ - 2ÌïôÎÖÑ 2ÌïôÍ∏∞</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Google AI Studio Style Colors */
            --primary-color: #1a73e8;
            --primary-hover: #1557b0;
            --bg-color: #ffffff;
            --surface-color: #f8f9fa;
            --border-color: #dadce0;
            --text-primary: #202124;
            --text-secondary: #5f6368;
            
            /* Feedback Colors */
            --correct-bg: #e6f4ea;
            --correct-border: #1e8e3e;
            --correct-text: #137333;
            
            --wrong-bg: #fce8e6;
            --wrong-border: #d93025;
            --wrong-text: #c5221f;

            --shadow-sm: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
            --shadow-md: 0 4px 6px rgba(60,64,67,0.3);
            --radius: 8px;
        }

        * { box-sizing: border-box; }

        body {
            font-family: 'Roboto', 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
        }

        header {
            background-color: var(--bg-color);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        header h1 {
            font-size: 1.25rem;
            font-weight: 500;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        header h1::before {
            content: '';
            display: block;
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #4285f4, #9b72cb);
            border-radius: 4px;
        }

        nav {
            display: flex;
            justify-content: center;
            background: var(--bg-color);
            padding: 20px 0;
            gap: 10px;
        }

        nav button {
            background: none;
            border: none;
            padding: 8px 24px;
            font-size: 0.95rem;
            cursor: pointer;
            border-radius: 20px;
            color: var(--text-secondary);
            font-weight: 500;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        nav button:hover { background-color: var(--surface-color); color: var(--text-primary); }
        nav button.active { background-color: #e8f0fe; color: var(--primary-color); }

        main { padding: 0 20px 40px 20px; max-width: 800px; margin: 0 auto; }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: 4px;
            font-size: 0.95rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
            font-family: inherit;
        }
        .btn:hover { background-color: var(--primary-hover); box-shadow: 0 1px 3px rgba(0,0,0,0.2); }

        /* List View */
        .accordion-item {
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            margin-bottom: 12px;
            overflow: hidden;
            transition: box-shadow 0.2s;
        }
        .accordion-header {
            padding: 16px 24px;
            background: var(--bg-color);
            cursor: pointer;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .accordion-header.active { background-color: #f8f9fa; color: var(--primary-color); }
        .accordion-header::after {
            content: '‚ñº'; font-size: 0.7rem; color: var(--text-secondary); transition: transform 0.3s;
        }
        .accordion-header.active::after { transform: rotate(180deg); color: var(--primary-color); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; background: white; }
        .word-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 12px; padding: 20px; }
        .word-item { border: 1px solid var(--border-color); border-radius: var(--radius); padding: 12px; text-align: center; }

        /* Flashcard */
        .flashcard-container { display: flex; flex-direction: column; align-items: center; margin-top: 20px; }
        .card {
            width: 100%; max-width: 360px; height: 240px;
            background: white; border: 1px solid var(--border-color); border-radius: 16px;
            box-shadow: var(--shadow-sm); display: flex; flex-direction: column;
            justify-content: center; align-items: center; cursor: pointer; position: relative;
            margin-bottom: 24px; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card:hover { box-shadow: var(--shadow-md); transform: translateY(-2px); }
        .card-hanja { font-size: 4rem; font-weight: 400; color: var(--text-primary); transition: all 0.4s ease; }
        .card-meaning {
            font-size: 1.5rem; color: var(--primary-color); font-weight: 500; opacity: 0;
            transform: translateY(20px); transition: all 0.4s ease; position: absolute; bottom: 60px; width: 90%; text-align: center;
        }
        .card.revealed { border-color: var(--primary-color); background-color: #f8faff; }
        .card.revealed .card-hanja { transform: translateY(-30px); font-size: 2.5rem; color: var(--text-secondary); }
        .card.revealed .card-meaning { opacity: 1; transform: translateY(0); }
        .click-guide { position: absolute; bottom: 20px; font-size: 0.8rem; color: #9aa0a6; }
        .controls { display: flex; gap: 12px; align-items: center; }

        /* Quiz Styles */
        .quiz-container { max-width: 600px; margin: 0 auto; text-align: center; }
        .quiz-setup {
            background: white; padding: 40px; border-radius: 16px;
            border: 1px solid var(--border-color); box-shadow: var(--shadow-sm); text-align: left;
        }
        .setup-group { margin-bottom: 24px; }
        .setup-group label { display: block; margin-bottom: 8px; font-weight: 500; }
        .setup-group select { width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 4px; outline: none; }
        .setup-group select:focus { border-color: var(--primary-color); }

        .quiz-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 20px; color: var(--text-secondary); font-weight: 500;
        }

        /* Timer Bar Style */
        .timer-wrapper {
            display: flex; align-items: center; gap: 10px;
            background: white; padding: 6px 12px; border-radius: 20px;
            border: 1px solid var(--border-color);
        }
        .timer-bar-bg {
            width: 100px; height: 8px; background: #eee; border-radius: 4px; overflow: hidden;
        }
        .timer-bar-fill {
            height: 100%; background: var(--primary-color); width: 100%;
            transition: width 1s linear;
        }
        .timer-text { font-weight: 700; color: var(--primary-color); font-size: 0.9rem; min-width: 30px; text-align: right; }

        /* Question Box */
        .quiz-question-box {
            background: white; border: 1px solid var(--border-color); border-radius: 16px;
            padding: 40px 20px; margin-bottom: 24px; transition: all 0.3s ease; position: relative;
        }
        .quiz-question { font-size: 4rem; font-weight: 400; margin-bottom: 10px; }
        .quiz-question.text-mode { font-size: 2.2rem; }
        .quiz-answer-display {
            font-size: 1.4rem; font-weight: 500; color: var(--primary-color);
            opacity: 0; transform: translateY(10px); transition: all 0.3s; height: 30px;
        }
        .quiz-answer-display.show { opacity: 1; transform: translateY(0); }
        
        /* Status Colors for Question Box */
        .quiz-question-box.box-correct {
            background-color: var(--correct-bg);
            border-color: var(--correct-border);
        }
        .quiz-question-box.box-correct .quiz-answer-display { color: var(--correct-text); }

        .quiz-question-box.box-wrong {
            background-color: var(--wrong-bg);
            border-color: var(--wrong-border);
            cursor: pointer; /* Make it look clickable */
        }
        .quiz-question-box.box-wrong:hover {
            filter: brightness(0.98);
        }
        .quiz-question-box.box-wrong .quiz-answer-display { color: var(--wrong-text); }

        .click-to-continue-msg {
            display: none; margin-top: 15px; font-size: 0.9rem; font-weight: 500; animation: fadeIn 0.5s;
            color: var(--wrong-text);
        }

        /* Options */
        .options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .option-btn {
            background: white; border: 1px solid var(--border-color); border-radius: 8px;
            padding: 16px; font-size: 1.1rem; cursor: pointer; transition: all 0.2s;
            font-family: inherit; min-height: 64px; display: flex; align-items: center; justify-content: center;
        }
        .option-btn:hover { background-color: var(--surface-color); border-color: #9aa0a6; }
        .option-btn.correct {
            background-color: var(--correct-bg); color: var(--correct-text);
            border-color: var(--correct-border); font-weight: 700;
        }
        .option-btn.wrong {
            background-color: var(--wrong-bg); color: var(--wrong-text);
            border-color: var(--wrong-border); opacity: 0.6;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .hanja-text { font-size: 1.4rem; font-weight: 500; display: block; margin-bottom: 4px; }
        .meaning-text { font-size: 0.9rem; color: var(--text-secondary); }

    </style>
</head>
<body>

<header>
    <h1>ÌïôÏäµÏßÄ Î≥µÏäµ</h1>
</header>

<nav>
    <button onclick="setMode('list')" id="btn-list" class="active">Î™©Î°ù</button>
    <button onclick="setMode('card')" id="btn-card">Ïπ¥Îìú</button>
    <button onclick="setMode('quiz')" id="btn-quiz">ÌÄ¥Ï¶à</button>
</nav>

<main id="app-content">
    <!-- JavaScript Content -->
</main>

<script>
    const studyData = [
        // I. ÌïúÏûê
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Áøí", a: "ÏùµÌûê Ïäµ" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Â≠ù", a: "Ìö®ÎèÑ Ìö®" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Êñ∞", a: "ÏÉàÎ°úÏö∏ Ïã†" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Á´•", a: "ÏïÑÏù¥ Îèô" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "‰∫§", a: "ÏÇ¨Í∑à Íµê" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Ê†°", a: "ÌïôÍµê Íµê" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Áîü", a: "ÎÇ† ÏÉù (ÏÇ¥Îã§)" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Ëªä", a: "ÏàòÎ†à Í±∞(Ï∞®)" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Èï∑", a: "Í∏∏ Ïû•" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Â§ö", a: "ÎßéÏùÑ Îã§" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Âêç", a: "Ïù¥Î¶Ñ Î™Ö" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Êàê", a: "Ïù¥Î£∞ ÏÑ±" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Âèã", a: "Î≤ó Ïö∞" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Âà©", a: "Ïù¥Î°úÏö∏ Î¶¨" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Áµê", a: "Îß∫ÏùÑ Í≤∞" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "ÂÖÑ", a: "Ìòï Ìòï" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "‰ª£", a: "ÎåÄÏã†Ìï† ÎåÄ" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "ÂñÑ", a: "Ï∞©Ìï† ÏÑ†" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "ËÆÄ", a: "ÏùΩÏùÑ ÎèÖ" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Èüì", a: "ÎÇòÎùºÏù¥Î¶Ñ Ìïú" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Ëê¨", a: "ÏùºÎßå Îßå" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "ÊïÖ", a: "Ïòõ Í≥†" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "È™®", a: "Îºà Í≥®" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "È¢®", a: "Î∞îÎûå Ìíç" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "ÂØ∏", a: "ÎßàÎîî Ï¥å" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Ë¶ã", a: "Î≥º Í≤¨" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Êéà", a: "Ï§Ñ Ïàò" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Ê≠¢", a: "Í∑∏Ïπ† ÏßÄ" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "ËÅΩ", a: "Îì§ÏùÑ Ï≤≠" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "ÈÅ†", a: "Î©Ä Ïõê" },
        { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Âèó", a: "Î∞õÏùÑ Ïàò" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Ëµ∞", a: "Îã¨Î¶¥ Ï£º" }, { cat: "I. ÌïúÏûê (ÏùåÍ≥º Îúª)", q: "Â≠∏", a: "Î∞∞Ïö∏ Ìïô" },

        // II. Ïñ¥Ìúò
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÁîüÁâ©", a: "ÏÉùÎ¨º" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÁîüÊ≠ª", a: "ÏÉùÏÇ¨" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÁîüÂ≠ò", a: "ÏÉùÏ°¥" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Êõ¥Êñ∞", a: "Í≤ΩÏã†, Í∞±Ïã†" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Â≠∏Áîü", a: "ÌïôÏÉù" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÊîæÂ≠∏", a: "Î∞©Ìïô" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Ê§çÊú®", a: "ÏãùÎ™©" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Â§öËÆÄ", a: "Îã§ÎèÖ" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÂâçÂæå", a: "Ï†ÑÌõÑ" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Ë¶ãÂ≠∏", a: "Í≤¨Ìïô" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "È´ò‰Ωé", a: "Í≥†Ï†Ä" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÁüõÁõæ", a: "Î™®Ïàú" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Áç®Ê≠•", a: "ÎèÖÎ≥¥" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Ê≥¢Âèä", a: "ÌååÍ∏â" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÈêµÈù¢ÁöÆ", a: "Ï≤†Î©¥Ìîº" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Ëå∂È£Ø‰∫ã", a: "Îã§Î∞òÏÇ¨" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Â¶ÇÂèçÊéå", a: "Ïó¨Î∞òÏû•" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Ëê¨ÈáåÈï∑Âüé", a: "ÎßåÎ¶¨Ïû•ÏÑ±" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÂØíÊ≥¢", a: "ÌïúÌåå" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "È¢®Êµ™", a: "ÌíçÎûë" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÊéàÂèó", a: "ÏàòÏàò" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Á´∂Ëµ∞", a: "Í≤ΩÏ£º" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Á´∂Ê≠•", a: "Í≤ΩÎ≥¥" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÂúãË™û", a: "Íµ≠Ïñ¥" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÂÆàÈñÄÂ∞á", a: "ÏàòÎ¨∏Ïû•" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÈÑïÂèã", a: "Ìñ•Ïö∞" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Èò≤Ê≠¢", a: "Î∞©ÏßÄ" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÂÆåËµ∞", a: "ÏôÑÏ£º" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Â§±Ë∂≥", a: "Ïã§Ï°±" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÂàùÊ≠•", a: "Ï¥àÎ≥¥" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Âæ©Áøí", a: "Î≥µÏäµ" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Âæ©Ê¥ª", a: "Î∂ÄÌôú" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Èõ£Êòì", a: "ÎÇúÏù¥" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "‰∫§Êòì", a: "ÍµêÏó≠" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÈôçÁ≠â", a: "Í∞ïÎì±" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "‰∏ãÈôç", a: "ÌïòÍ∞ï" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÂÖ±Áîü", a: "Í≥µÏÉù" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Êõ¥Á¥ô", a: "Í∞±ÏßÄ" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ËÆäÊõ¥", a: "Î≥ÄÍ≤Ω" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÂÅáË®≠", a: "Í∞ÄÏÑ§" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÈÅäË™™", a: "Ïú†ÏÑ∏" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÈóúÁ®Ö", a: "Í¥ÄÏÑ∏" },
        { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Ê±ÇÂøÉÂäõ", a: "Íµ¨Ïã¨Î†•" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "ÈÅ†ÂøÉÂäõ", a: "ÏõêÏã¨Î†•" }, { cat: "II. Ïñ¥Ìúò (ÎèÖÏùå)", q: "Ë≤ØÊ∞¥Ê±†", a: "Ï†ÄÏàòÏßÄ" },

        // III. ÏÑ±Ïñ¥
        { cat: "III. ÏÑ±Ïñ¥", q: "ÈñÄÂâçÊàêÂ∏Ç", a: "Î¨∏Ï†ÑÏÑ±Ïãú" }, { cat: "III. ÏÑ±Ïñ¥", q: "ÂêæÈºª‰∏âÂ∞∫", a: "Ïò§ÎπÑÏÇºÏ≤ô" },
        { cat: "III. ÏÑ±Ïñ¥", q: "‰∏ÄÁü≥‰∫åÈ≥•", a: "ÏùºÏÑùÏù¥Ï°∞" }, { cat: "III. ÏÑ±Ïñ¥", q: "ÁâõËÄ≥ËÆÄÁ∂ì", a: "Ïö∞Ïù¥ÎèÖÍ≤Ω" },
        { cat: "III. ÏÑ±Ïñ¥", q: "Âº±ËÇâÂº∫È£ü", a: "ÏïΩÏú°Í∞ïÏãù" }, { cat: "III. ÏÑ±Ïñ¥", q: "ÂéªË®ÄÁæé‰æÜË®ÄÁæé", a: "Í±∞Ïñ∏ÎØ∏ ÎûòÏñ∏ÎØ∏" },
        { cat: "III. ÏÑ±Ïñ¥", q: "ÂñÆÂàÄÁõ¥ÂÖ•", a: "Îã®ÎèÑÏßÅÏûÖ" }, { cat: "III. ÏÑ±Ïñ¥", q: "ÊúãÂèãÊúâ‰ø°", a: "Î∂ïÏö∞Ïú†Ïã†" },
        { cat: "III. ÏÑ±Ïñ¥", q: "Ë®Ä‰∏≠ÊúâÈ™®", a: "Ïñ∏Ï§ëÏú†Í≥®" }, { cat: "III. ÏÑ±Ïñ¥", q: "ÊàëÁî∞ÂºïÊ∞¥", a: "ÏïÑÏ†ÑÏù∏Ïàò" },
        { cat: "III. ÏÑ±Ïñ¥", q: "Êúù‰∏âÊöÆÂõõ", a: "Ï°∞ÏÇºÎ™®ÏÇ¨" },

        // IV. ÏßúÏûÑ
        { cat: "IV. ÏßúÏûÑ", q: "Â§úÊ∑±", a: "ÏïºÏã¨ (Ï£ºÏà†)" }, { cat: "IV. ÏßúÏûÑ", q: "Ë∫´È´î", a: "Ïã†Ï≤¥ (Î≥ëÎ†¨)" },
        { cat: "IV. ÏßúÏûÑ", q: "Ê≠£Áõ¥", a: "Ï†ïÏßÅ (Î≥ëÎ†¨)" }, { cat: "IV. ÏßúÏûÑ", q: "Â∏åÊúõ", a: "Ìù¨Îßù (Î≥ëÎ†¨)" },
        { cat: "IV. ÏßúÏûÑ", q: "Â∑®Â§ß", a: "Í±∞ÎåÄ (Î≥ëÎ†¨)" }, { cat: "IV. ÏßúÏûÑ", q: "Â§öËÆÄ", a: "Îã§ÎèÖ (ÏàòÏãù)" },
        { cat: "IV. ÏßúÏûÑ", q: "Èõ£Ëß£", a: "ÎÇúÌï¥ (Ïà†Î≥¥)" }, { cat: "IV. ÏßúÏûÑ", q: "ÂàÜÊ•≠", a: "Î∂ÑÏóÖ (Ïà†Î™©)" }
    ];

    let currentMode = 'list';
    let cardIndex = 0;
    let quizScore = 0;
    let shuffledData = [];
    let quizType = 'hanjaToMeaning';
    let timeLimitSetting = 0;
    let timerInterval = null;
    let waitingForNext = false;

    renderList();

    function setMode(mode) {
        currentMode = mode;
        if(timerInterval) clearInterval(timerInterval);
        waitingForNext = false;

        document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`btn-${mode}`).classList.add('active');

        const content = document.getElementById('app-content');
        content.innerHTML = '';

        if (mode === 'list') renderList();
        else if (mode === 'card') initCard();
        else if (mode === 'quiz') initQuizSetup();
    }

    function renderList() {
        const content = document.getElementById('app-content');
        const categories = {};
        studyData.forEach(item => {
            if (!categories[item.cat]) categories[item.cat] = [];
            categories[item.cat].push(item);
        });

        let html = '<div class="list-container">';
        for (const [cat, items] of Object.entries(categories)) {
            html += `
                <div class="accordion-item">
                    <div class="accordion-header" onclick="toggleAccordion(this)">
                        ${cat} 
                    </div>
                    <div class="accordion-content">
                        <div class="word-grid">
            `;
            items.forEach(item => {
                html += `
                    <div class="word-item">
                        <span class="hanja-text">${item.q}</span>
                        <span class="meaning-text">${item.a}</span>
                    </div>`;
            });
            html += `</div></div></div>`;
        }
        html += '</div>';
        content.innerHTML = html;
    }

    function toggleAccordion(header) {
        header.classList.toggle('active');
        const content = header.nextElementSibling;
        if (content.style.maxHeight) content.style.maxHeight = null;
        else content.style.maxHeight = content.scrollHeight + "px";
    }

    function initCard() {
        shuffledData = [...studyData].sort(() => Math.random() - 0.5);
        cardIndex = 0;
        renderCard();
    }

    function renderCard() {
        const content = document.getElementById('app-content');
        const item = shuffledData[cardIndex];
        const total = shuffledData.length;

        const html = `
            <div class="flashcard-container">
                <div class="card" id="flashcard" onclick="handleCardClick()">
                    <div class="card-hanja">${item.q}</div>
                    <div class="card-meaning">${item.a}</div>
                    <div class="click-guide" id="click-guide">ÌÅ¥Î¶≠ÌïòÏó¨ ÌôïÏù∏</div>
                </div>
                <div class="controls">
                    <button class="btn" onclick="prevCard()" ${cardIndex === 0 ? 'disabled' : ''} style="background:#dadce0; color:#5f6368;">Ïù¥Ï†Ñ</button>
                    <span style="font-weight:500; color:#5f6368; font-size:0.9rem;">${cardIndex + 1} / ${total}</span>
                    <button class="btn" onclick="nextCard()">Îã§Ïùå</button>
                    <button class="btn" onclick="initCard()" style="background:#5f6368;">ÏÑûÍ∏∞</button>
                </div>
            </div>`;
        content.innerHTML = html;
    }

    function handleCardClick() {
        const card = document.getElementById('flashcard');
        const guide = document.getElementById('click-guide');
        if (!card.classList.contains('revealed')) {
            card.classList.add('revealed');
            guide.innerText = "ÌïúÎ≤à Îçî ÌÅ¥Î¶≠ÌïòÎ©¥ Îã§ÏùåÏúºÎ°ú ÎÑòÏñ¥Í∞ëÎãàÎã§";
        } else {
            nextCard();
        }
    }

    function nextCard() {
        if (cardIndex < shuffledData.length - 1) {
            cardIndex++;
            renderCard();
        } else {
            alert("ÎßàÏßÄÎßâ Ïπ¥ÎìúÏûÖÎãàÎã§!");
        }
    }

    function prevCard() {
        if (cardIndex > 0) { cardIndex--; renderCard(); }
    }

    function initQuizSetup() {
        const content = document.getElementById('app-content');
        content.innerHTML = `
            <div class="quiz-container">
                <div class="quiz-setup">
                    <h2 style="margin-top:0; margin-bottom:24px; font-weight:500; color:var(--primary-color);">ÌÄ¥Ï¶à ÏÑ§Ï†ï</h2>
                    <div class="setup-group">
                        <label>Î¨∏Ï†ú Ïú†Ìòï</label>
                        <select id="setup-type">
                            <option value="hanjaToMeaning">ÌïúÏûê Î≥¥Í≥† Îúª/Ïùå ÎßûÏ∂îÍ∏∞</option>
                            <option value="meaningToHanja">Îúª/Ïùå Î≥¥Í≥† ÌïúÏûê ÎßûÏ∂îÍ∏∞</option>
                        </select>
                    </div>
                    <div class="setup-group">
                        <label>Ï†úÌïú ÏãúÍ∞Ñ (Î¨∏Ï†úÎãπ)</label>
                        <select id="setup-time">
                            <option value="0">Ï†úÌïú ÏóÜÏùå</option>
                            <option value="5">5Ï¥à</option>
                            <option value="10">10Ï¥à</option>
                            <option value="15">15Ï¥à</option>
                        </select>
                    </div>
                    <button class="btn" style="width:100%; margin-top:12px;" onclick="startRealQuiz()">ÏãúÏûëÌïòÍ∏∞</button>
                </div>
            </div>`;
    }

    function startRealQuiz() {
        const typeSelect = document.getElementById('setup-type');
        const timeSelect = document.getElementById('setup-time');
        quizType = typeSelect.value;
        timeLimitSetting = parseInt(timeSelect.value, 10);
        
        quizScore = 0;
        shuffledData = [...studyData].sort(() => Math.random() - 0.5);
        cardIndex = 0;
        renderQuiz();
    }

    function renderQuiz() {
        waitingForNext = false;
        const content = document.getElementById('app-content');
        
        if (cardIndex >= shuffledData.length) {
            content.innerHTML = `
                <div class="quiz-container">
                    <div class="quiz-setup" style="text-align:center;">
                        <h2 style="margin-bottom:10px;">ÌïôÏäµ Ï¢ÖÎ£å!</h2>
                        <p style="font-size:2.5rem; font-weight:700; color:var(--primary-color); margin:20px 0;">${quizScore} / ${shuffledData.length}</p>
                        <button class="btn" onclick="initQuizSetup()">Ï≤òÏùåÏúºÎ°ú</button>
                    </div>
                </div>`;
            return;
        }

        const item = shuffledData[cardIndex];
        let questionText, answerText, correctValue;
        
        if (quizType === 'hanjaToMeaning') {
            questionText = item.q; answerText = item.a; correctValue = item.a;
        } else {
            questionText = item.a; answerText = item.q; correctValue = item.q;
        }

        const sameCatItems = studyData.filter(d => d.cat === item.cat && d.q !== item.q);
        let wrongCandidates = sameCatItems.sort(() => Math.random() - 0.5).slice(0, 3);
        
        if (wrongCandidates.length < 3) {
            const otherItems = studyData.filter(d => d.cat !== item.cat);
            const moreWrong = otherItems.sort(() => Math.random() - 0.5).slice(0, 3 - wrongCandidates.length);
            wrongCandidates = [...wrongCandidates, ...moreWrong];
        }
        
        const wrongAnswers = wrongCandidates.map(d => quizType === 'hanjaToMeaning' ? d.a : d.q);
        const options = [...wrongAnswers, correctValue].sort(() => Math.random() - 0.5);

        // Timer HTML
        let timerHtml = '';
        if (timeLimitSetting > 0) {
            timerHtml = `
                <div class="timer-wrapper">
                    <div class="timer-bar-bg"><div class="timer-bar-fill" id="timer-bar"></div></div>
                    <div class="timer-text" id="timer-text">${timeLimitSetting}</div>
                </div>`;
        }

        let html = `
            <div class="quiz-container">
                <div class="quiz-header">
                    <span>Î¨∏Ï†ú ${cardIndex + 1} / ${shuffledData.length}</span>
                    ${timerHtml}
                </div>
                
                <div class="quiz-question-box" id="question-box">
                    <div class="quiz-question ${quizType === 'meaningToHanja' ? 'text-mode' : ''}">${questionText}</div>
                    <div class="quiz-answer-display" id="quiz-answer-text">${answerText}</div>
                    <div class="click-to-continue-msg" id="continue-msg">üëÜ Ïó¨Í∏∞Î•º ÌÅ¥Î¶≠ÌïòÏó¨ Îã§ÏùåÏúºÎ°ú</div>
                </div>

                <div class="options-grid">`;

        options.forEach(opt => {
            html += `<button class="option-btn" onclick="checkAnswer(this, '${correctValue}', '${opt}')">${opt}</button>`;
        });

        html += `</div></div>`;
        content.innerHTML = html;

        if (timeLimitSetting > 0) startTimer(correctValue);
    }

    function startTimer(correctAnswer) {
        let timeLeft = timeLimitSetting;
        const bar = document.getElementById('timer-bar');
        const text = document.getElementById('timer-text');
        
        if(timerInterval) clearInterval(timerInterval);
        
        timerInterval = setInterval(() => {
            timeLeft--;
            const percentage = (timeLeft / timeLimitSetting) * 100;
            
            if (bar) bar.style.width = percentage + "%";
            if (text) text.innerText = timeLeft;

            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                if (bar) bar.style.width = "0%";
                checkAnswer(null, correctAnswer, null);
            }
        }, 1000);
    }

    function checkAnswer(btn, correct, selected) {
        if (waitingForNext) return;
        if (timerInterval) clearInterval(timerInterval);

        const buttons = document.querySelectorAll('.option-btn');
        const answerDisplay = document.getElementById('quiz-answer-text');
        const questionBox = document.getElementById('question-box');
        const continueMsg = document.getElementById('continue-msg');
        
        buttons.forEach(b => b.disabled = true);
        answerDisplay.classList.add('show');

        if (btn && correct === selected) {
            // Correct
            btn.classList.add('correct');
            questionBox.classList.add('box-correct'); // Green Box
            quizScore++;
            setTimeout(() => {
                cardIndex++;
                renderQuiz();
            }, 700);
        } else {
            // Wrong
            waitingForNext = true;
            if (btn) btn.classList.add('wrong');
            questionBox.classList.add('box-wrong'); // Red Box
            
            buttons.forEach(b => {
                if (b.innerText === correct) b.classList.add('correct');
            });

            continueMsg.style.display = 'block';
            questionBox.onclick = function() {
                cardIndex++;
                renderQuiz();
            };
        }
    }
</script>

</body>
</html>